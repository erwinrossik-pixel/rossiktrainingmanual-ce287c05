import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

export type Language = 'ro' | 'de' | 'en';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const STORAGE_KEY = 'rossik-manual-language';

// UI Translations
const translations: Record<Language, Record<string, string>> = {
  ro: {
    // Sidebar
    'sidebar.title': 'Manual Freight Forwarding',
    'sidebar.progress': 'Progres General',
    'sidebar.chapters': 'capitole',
    'sidebar.details': 'Detalii',
    'sidebar.version': 'Versiunea 2025',
    'sidebar.edition': 'EdiÈ›ie CompletÄƒ',
    'sidebar.locked': 'CompleteazÄƒ capitolul anterior cu scor â‰¥9/10',
    
    // Sections
    'section.foundation': 'Fundament',
    'section.equipment': 'Echipamente',
    'section.documents': 'Documente & ReglementÄƒri',
    'section.geography': 'Geografie & Rute',
    'section.commercial': 'AbilitÄƒÈ›i Comerciale',
    'section.technology': 'Sisteme & Tehnologie',
    'section.finance': 'Risc & FinanÈ›e',
    'section.practical': 'Aplicare PracticÄƒ',
    
    // Chapters
    'chapter.intro': 'Introducere',
    'chapter.mindset': 'Rol & Mentalitate',
    'chapter.soft-skills': 'Soft Skills',
    'chapter.workflow': 'Flux OperaÈ›ional',
    'chapter.vehicle': 'ReferinÈ›Äƒ Vehicule',
    'chapter.loading': 'ÃncÄƒrcare & Fixare',
    'chapter.reefer': 'Transport Frigorific',
    'chapter.warehouse': 'Depozit & Cross-Dock',
    'chapter.adr': 'ADR MÄƒrfuri Periculoase',
    'chapter.documents': 'Documente Transport',
    'chapter.incoterms': 'Incoterms & ComerÈ›',
    'chapter.compliance': 'Ore de Condus',
    'chapter.driving-time': 'Schimb vs Condus',
    'chapter.customs': 'VamÄƒ & Frontiere',
    'chapter.europe-zones': 'Zone Europene',
    'chapter.environment': 'Mediu',
    'chapter.supply-chain': 'LanÈ› Aprovizionare',
    'chapter.pricing': 'PreÈ›uri & Taxe',
    'chapter.commercial': 'AbilitÄƒÈ›i Comerciale',
    'chapter.negotiation': 'Negociere',
    'chapter.clients': 'GÄƒsirea ClienÈ›ilor',
    'chapter.carrier-management': 'Gestiune Transportatori',
    'chapter.exchanges': 'Burse de MarfÄƒ',
    'chapter.communication': 'Comunicare',
    'chapter.kpi': 'KPI & PerformanÈ›Äƒ',
    'chapter.translogica': 'Translogica TMS',
    'chapter.fleet': 'FlotÄƒ & GPS',
    'chapter.technology': 'Tehnologie & Digital',
    'chapter.risk-management': 'Managementul Riscului',
    'chapter.insurance': 'AsigurÄƒri Transport',
    'chapter.claims': 'Daune & Dispute',
    'chapter.payment': 'PlÄƒÈ›i & Facturare',
    'chapter.accounting': 'Contabilitate',
    'chapter.emergency': 'Proceduri UrgenÈ›Äƒ',
    'chapter.case-studies': 'Studii de Caz',
    'chapter.training': 'ExerciÈ›ii Training',
    'chapter.red-flags': 'Red Flags & Sfaturi',
    'chapter.glossary': 'Glosar',
    'chapter.checklists': 'Checklists',
    'chapter.licenses-oversize': 'LicenÈ›e & Agabaritic',
    'chapter.stress-management': 'Gestionare Stres',
    'chapter.sustainability': 'Sustenabilitate',
    'chapter.authorities': 'AutoritÄƒÈ›i & ReglementÄƒri',
    'chapter.digitalization': 'Digitalizare',
    'chapter.european-countries': 'ÈšÄƒri Europene',
    'chapter.express-transport': 'Transport Express',
    'chapter.high-value-goods': 'MÄƒrfuri de Valoare',
    'chapter.intermodal': 'Transport Intermodal',
    'chapter.networking': 'Networking',
    'chapter.professional-development': 'Dezvoltare ProfesionalÄƒ',
    
    // Sections
    'section.advanced': 'Avansat',
    
    // Dashboard
    'dashboard.title': 'Dashboard Progres',
    'dashboard.subtitle': 'UrmÄƒreÈ™te progresul tÄƒu de Ã®nvÄƒÈ›are',
    'dashboard.back': 'Ãnapoi',
    'dashboard.overall': 'Progres General',
    'dashboard.completed': 'Capitole Completate',
    'dashboard.total': 'din total',
    'dashboard.quizzes': 'Teste Completate',
    'dashboard.passed': 'promovate',
    'dashboard.average': 'Scor Mediu',
    'dashboard.passRate': 'ratÄƒ promovare',
    'dashboard.recent': 'Activitate RecentÄƒ',
    'dashboard.noActivity': 'Nicio activitate Ã®ncÄƒ. Ãncepe sÄƒ citeÈ™ti capitolele!',
    'dashboard.quizPerformance': 'PerformanÈ›Äƒ Teste',
    'dashboard.passRateLabel': 'RatÄƒ Promovare',
    'dashboard.totalScore': 'Scor Total',
    'dashboard.passedLabel': 'Promovate',
    'dashboard.needImprovement': 'De ÃmbunÄƒtÄƒÈ›it',
    'dashboard.allChapters': 'Toate Capitolele',
    'dashboard.congratulations': 'FelicitÄƒri!',
    'dashboard.completedAll': 'Ai completat toate capitolele È™i testele',
    'dashboard.reset': 'ReseteazÄƒ Progresul',
    'dashboard.resetConfirm': 'EÈ™ti sigur cÄƒ vrei sÄƒ resetezi tot progresul?',
    
    // Quiz
    'quiz.complete': 'Test Finalizat!',
    'quiz.excellent': 'Excelent! Ai stÄƒpÃ¢nit acest capitol.',
    'quiz.good': 'Bine! RevizuieÈ™te Ã®ntrebÄƒrile greÈ™ite.',
    'quiz.keepStudying': 'ContinuÄƒ sÄƒ studiezi! RevizuieÈ™te capitolul È™i Ã®ncearcÄƒ din nou.',
    'quiz.chapterComplete': 'Capitol marcat ca finalizat!',
    'quiz.questionPool': 'Pool Ã®ntrebÄƒri',
    'quiz.showing': 'AfiÈ™eazÄƒ',
    'quiz.perRound': 'per rundÄƒ',
    'quiz.tryAgain': 'ÃncearcÄƒ Din Nou',
    'quiz.newQuestions': 'ÃntrebÄƒri Noi',
    'quiz.question': 'Ãntrebarea',
    'quiz.of': 'din',
    'quiz.previousBest': 'Cel mai bun anterior',
    'quiz.correct': 'Corect!',
    'quiz.incorrect': 'Incorect',
    'quiz.next': 'UrmÄƒtoarea Ãntrebare',
    'quiz.seeResults': 'Vezi Rezultatele',
    
    // Navigation
    'nav.previous': 'Anterior',
    'nav.next': 'UrmÄƒtorul',
    'nav.search': 'CautÄƒ Ã®n manual...',
    'nav.noResults': 'Niciun rezultat gÄƒsit',
    
    // Language
    'language.select': 'SelecteazÄƒ limba',
    'language.ro': 'RomÃ¢nÄƒ',
    'language.de': 'Deutsch',
    'language.en': 'English',
    
    // Admin Dashboard
    'admin.title': 'Admin Dashboard',
    'admin.subtitle': 'Gestionare utilizatori È™i progres training',
    'admin.exportCSV': 'Export CSV',
    'admin.totalUsers': 'Total Utilizatori',
    'admin.registeredUsers': 'utilizatori Ã®nregistraÈ›i',
    'admin.totalChapters': 'Capitole Total',
    'admin.availableChapters': 'capitole disponibile',
    'admin.globalAvgScore': 'Scor Mediu Global',
    'admin.allScoresAvg': 'medie toate scorurile',
    'admin.activeUsers7d': 'Utilizatori Activi (7 zile)',
    'admin.recentlyActive': 'activi recent',
    'admin.notificationsActive': 'NotificÄƒri active pentru certificate noi',
    'admin.enableNotifications': 'ActiveazÄƒ notificÄƒrile pentru certificate noi',
    
    // Admin Categories
    'admin.category.superAdmin': 'ğŸ¢ SUPER ADMIN',
    'admin.category.users': 'ğŸ‘¥ UTILIZATORI',
    'admin.category.analytics': 'ğŸ“Š ANALIZE & KPI',
    'admin.category.competencies': 'ğŸ¯ COMPETENÈšE',
    'admin.category.content': 'ğŸ“ CONÈšINUT',
    'admin.category.system': 'âš™ï¸ SISTEM',
    
    // Admin Tabs
    'admin.tab.companies': 'Companii',
    'admin.tab.plans': 'Planuri',
    'admin.tab.premium': 'Premium',
    'admin.tab.companyUsers': 'Utilizatori Companie',
    'admin.tab.chapters': 'Capitole',
    'admin.tab.reports': 'Rapoarte',
    'admin.tab.allProfiles': 'Toate Profilurile',
    'admin.tab.retention': 'RetenÈ›ie',
    'admin.tab.quizAnalytics': 'AnalizÄƒ Quiz',
    'admin.tab.charts': 'Grafice',
    'admin.tab.learningKPI': 'Learning KPI',
    'admin.tab.usage': 'Utilizare',
    'admin.tab.trainingTime': 'Timp Training',
    'admin.tab.realtime': 'Timp Real',
    'admin.tab.teamCompetencies': 'CompetenÈ›e EchipÄƒ',
    'admin.tab.competencyGaps': 'Lipsuri CompetenÈ›e',
    'admin.tab.gamification': 'Gamificare',
    'admin.tab.certificates': 'Certificate',
    'admin.tab.contentQuality': 'Calitate ConÈ›inut',
    'admin.tab.governance': 'GuvernanÈ›Äƒ',
    'admin.tab.aiGovernor': 'AI Governor',
    'admin.tab.autoUpdate': 'Auto-Update',
    'admin.tab.intStandards': 'Standarde Int.',
    'admin.tab.knowledgeGraph': 'Knowledge Graph',
    'admin.tab.cronJobs': 'Cron Jobs',
    'admin.tab.monitoring': 'Monitorizare',
    'admin.tab.backup': 'Backup',
    'admin.tab.incidents': 'Incidente',
    'admin.tab.production': 'Production',
    
    // Admin Table
    'admin.table.user': 'Utilizator',
    'admin.table.email': 'Email',
    'admin.table.role': 'Rol',
    'admin.table.progress': 'Progres',
    'admin.table.avgScore': 'Scor Mediu',
    'admin.table.lastActivity': 'Ultima Activitate',
    'admin.table.actions': 'AcÈ›iuni',
    'admin.table.viewDetails': 'Vezi detalii',
    
    // Admin Status
    'admin.status.completed': 'Completat',
    'admin.status.inProgress': 'Ãn Progres',
    'admin.status.unlocked': 'Deblocat',
    'admin.status.locked': 'Blocat',
    
    // Quiz Analytics
    'admin.quiz.starts': 'Ãnceperi Quiz',
    'admin.quiz.completions': 'FinalizÄƒri',
    'admin.quiz.refreshes': 'Refresh-uri',
    'admin.quiz.abandonRate': 'RatÄƒ Abandon',
    'admin.quiz.wrongAnswers': 'RÄƒspunsuri GreÈ™ite',
    'admin.quiz.perChapter': 'Per Capitol',
    'admin.quiz.failedQuestions': 'ÃntrebÄƒri GreÈ™ite',
    'admin.quiz.perUser': 'Per Utilizator',
    'admin.quiz.refresh': 'ActualizeazÄƒ',
    'admin.quiz.export': 'Export CSV',
    'admin.quiz.refreshRate': 'RatÄƒ Refresh per Capitol',
    'admin.quiz.refreshRateDesc': 'Procentul de quiz-uri Ã®ncepute dar nefinalizate',
    'admin.quiz.completionDist': 'DistribuÈ›ie CompletÄƒri',
    'admin.quiz.completedVsAbandoned': 'Finalizate vs Abandonate',
    'admin.quiz.completed': 'Finalizate',
    'admin.quiz.abandoned': 'Refresh/Abandon',
    'admin.quiz.chapterDetails': 'Detalii per Capitol',
    'admin.quiz.chapter': 'Capitol',
    'admin.quiz.top30Failed': 'Top 30 ÃntrebÄƒri GreÈ™ite',
    'admin.quiz.mostFailed': 'ÃntrebÄƒrile la care utilizatorii greÈ™esc cel mai des',
    'admin.quiz.noData': 'Nu existÄƒ date Ã®ncÄƒ. RÄƒspunsurile greÈ™ite vor apÄƒrea aici.',
    'admin.quiz.errors': 'greÈ™eli',
    'admin.quiz.userStats': 'Statistici per Utilizator',
    'admin.quiz.userStatsDesc': 'CÃ¢te quiz-uri a Ã®nceput/finalizat fiecare utilizator',
    
    // Company Management
    'admin.company.title': 'Gestionare Companii',
    'admin.company.subtitle': 'AdministreazÄƒ toate companiile din platformÄƒ',
    'admin.company.new': 'Companie NouÄƒ',
    'admin.company.create': 'CreeazÄƒ Companie NouÄƒ',
    'admin.company.add': 'AdaugÄƒ o nouÄƒ companie Ã®n platformÄƒ',
    'admin.company.name': 'Nume Companie',
    'admin.company.slug': 'Slug (URL)',
    'admin.company.domain': 'Domeniu Custom (opÈ›ional)',
    'admin.company.plan': 'Plan',
    'admin.company.cancel': 'AnuleazÄƒ',
    'admin.company.createBtn': 'CreeazÄƒ',
    'admin.company.regCode': 'Cod Ãnregistrare',
    'admin.company.users': 'Utilizatori',
    'admin.company.status': 'Status',
    'admin.company.restricted': 'Acces restricÈ›ionat',
    'admin.company.restrictedDesc': 'Doar Super Admin poate gestiona companiile.',
    'admin.company.created': 'Companie creatÄƒ',
    'admin.company.createdDesc': 'a fost creatÄƒ cu succes',
    'admin.company.copied': 'Copiat!',
    'admin.company.copiedDesc': 'Codul a fost copiat Ã®n clipboard',
    'admin.company.updated': 'Status actualizat',
    'admin.company.active': 'activÄƒ',
    'admin.company.inactive': 'inactivÄƒ',
    
    // Retention Dashboard
    'admin.retention.title': 'Dashboard RetenÈ›ie',
    'admin.retention.activeUsers': 'Utilizatori Activi',
    'admin.retention.atRisk': 'La Risc',
    'admin.retention.inactive': 'Inactivi/PierduÈ›i',
    'admin.retention.reEngagement': 'RatÄƒ Re-angajare',
    'admin.retention.riskDist': 'DistribuÈ›ie Risc',
    'admin.retention.low': 'ScÄƒzut',
    'admin.retention.medium': 'Mediu',
    'admin.retention.high': 'Ridicat',
    'admin.retention.critical': 'Critic',
    'admin.retention.usersAtRisk': 'Utilizatori la Risc',
    'admin.retention.messageLogs': 'Jurnal Mesaje',
    'admin.retention.runAnalysis': 'RuleazÄƒ AnalizÄƒ',
    'admin.retention.analyzing': 'Se analizeazÄƒ...',
    'admin.retention.daysInactive': 'zile inactiv',
    'admin.retention.engagement': 'Angajament',
    'admin.retention.notifications': 'notificÄƒri trimise',
    
    // Gamification
    'admin.gamification.title': 'Clasament & Gamificare',
    'admin.gamification.leaderboard': 'Clasament',
    'admin.gamification.achievements': 'RealizÄƒri',
    'admin.gamification.simStats': 'Statistici SimulÄƒri',
    'admin.gamification.activeUsers': 'Utilizatori Activi',
    'admin.gamification.simCompleted': 'SimulÄƒri Finalizate',
    'admin.gamification.avgScore': 'Scor Mediu',
    'admin.gamification.totalXP': 'XP Total',
    'admin.gamification.level': 'Nivel',
    'admin.gamification.simulations': 'SimulÄƒri',
    'admin.gamification.streak': 'Serie Zile',
    'admin.gamification.topPerformers': 'Top Performeri SimulÄƒri',
    'admin.gamification.simPopularity': 'Popularitate SimulÄƒri',
    
    // General Admin
    'admin.general.loading': 'Se Ã®ncarcÄƒ...',
    'admin.general.error': 'Eroare',
    'admin.general.save': 'SalveazÄƒ',
    'admin.general.delete': 'È˜terge',
    'admin.general.edit': 'EditeazÄƒ',
    'admin.general.view': 'Vezi',
    'admin.general.close': 'Ãnchide',
    'admin.general.confirm': 'ConfirmÄƒ',
    'admin.general.noData': 'Nu existÄƒ date',
    'admin.general.perMonth': '/lunÄƒ',
  },
  de: {
    // Sidebar
    'sidebar.title': 'Speditionshandbuch',
    'sidebar.progress': 'Gesamtfortschritt',
    'sidebar.chapters': 'Kapitel',
    'sidebar.details': 'Details',
    'sidebar.version': 'Version 2025',
    'sidebar.edition': 'VollstÃ¤ndige Ausgabe',
    'sidebar.locked': 'SchlieÃŸen Sie das vorherige Kapitel mit â‰¥9/10 ab',
    
    // Sections
    'section.foundation': 'Grundlagen',
    'section.equipment': 'AusrÃ¼stung',
    'section.documents': 'Dokumente & Vorschriften',
    'section.geography': 'Geographie & Routen',
    'section.commercial': 'KaufmÃ¤nnische FÃ¤higkeiten',
    'section.technology': 'Systeme & Technologie',
    'section.finance': 'Risiko & Finanzen',
    'section.practical': 'Praktische Anwendung',
    
    // Chapters
    'chapter.intro': 'EinfÃ¼hrung',
    'chapter.mindset': 'Rolle & Denkweise',
    'chapter.soft-skills': 'Soft Skills',
    'chapter.workflow': 'Betriebsablauf',
    'chapter.vehicle': 'Fahrzeugreferenz',
    'chapter.loading': 'Laden & Sichern',
    'chapter.reefer': 'KÃ¼hltransport',
    'chapter.warehouse': 'Lager & Cross-Dock',
    'chapter.adr': 'ADR Gefahrgut',
    'chapter.documents': 'Transportdokumente',
    'chapter.incoterms': 'Incoterms & Handel',
    'chapter.compliance': 'Lenkzeiten',
    'chapter.driving-time': 'Schicht vs Fahren',
    'chapter.customs': 'Zoll & Grenzen',
    'chapter.europe-zones': 'EuropÃ¤ische Zonen',
    'chapter.environment': 'Umwelt',
    'chapter.supply-chain': 'Lieferkette',
    'chapter.pricing': 'Preise & GebÃ¼hren',
    'chapter.commercial': 'KaufmÃ¤nnische FÃ¤higkeiten',
    'chapter.negotiation': 'Verhandlung',
    'chapter.clients': 'Kundenakquise',
    'chapter.carrier-management': 'FrachtfÃ¼hrerverwaltung',
    'chapter.exchanges': 'FrachtbÃ¶rsen',
    'chapter.communication': 'Kommunikation',
    'chapter.kpi': 'KPI & Leistung',
    'chapter.translogica': 'Translogica TMS',
    'chapter.fleet': 'Flotte & GPS',
    'chapter.technology': 'Technologie & Digital',
    'chapter.risk-management': 'Risikomanagement',
    'chapter.insurance': 'Transportversicherung',
    'chapter.claims': 'SchÃ¤den & Streitigkeiten',
    'chapter.payment': 'Zahlung & Rechnungsstellung',
    'chapter.accounting': 'Buchhaltung',
    'chapter.emergency': 'Notfallverfahren',
    'chapter.case-studies': 'Fallstudien',
    'chapter.training': 'TrainingsÃ¼bungen',
    'chapter.red-flags': 'Warnzeichen & Tipps',
    'chapter.glossary': 'Glossar',
    'chapter.checklists': 'Checklisten',
    'chapter.licenses-oversize': 'Lizenzen & Schwertransport',
    'chapter.stress-management': 'Stressmanagement',
    'chapter.sustainability': 'Nachhaltigkeit',
    'chapter.authorities': 'BehÃ¶rden & Vorschriften',
    'chapter.digitalization': 'Digitalisierung',
    'chapter.european-countries': 'EuropÃ¤ische LÃ¤nder',
    'chapter.express-transport': 'Expresstransport',
    'chapter.high-value-goods': 'WertgÃ¼ter',
    'chapter.intermodal': 'Intermodaler Transport',
    'chapter.networking': 'Networking',
    'chapter.professional-development': 'Berufliche Entwicklung',
    
    // Sections
    'section.advanced': 'Fortgeschritten',
    
    // Dashboard
    'dashboard.title': 'Fortschritts-Dashboard',
    'dashboard.subtitle': 'Verfolgen Sie Ihren Lernfortschritt',
    'dashboard.back': 'ZurÃ¼ck',
    'dashboard.overall': 'Gesamtfortschritt',
    'dashboard.completed': 'Abgeschlossene Kapitel',
    'dashboard.total': 'von insgesamt',
    'dashboard.quizzes': 'Abgeschlossene Tests',
    'dashboard.passed': 'bestanden',
    'dashboard.average': 'Durchschnittsnote',
    'dashboard.passRate': 'Erfolgsquote',
    'dashboard.recent': 'Letzte AktivitÃ¤t',
    'dashboard.noActivity': 'Noch keine AktivitÃ¤t. Beginnen Sie mit dem Lesen!',
    'dashboard.quizPerformance': 'Testleistung',
    'dashboard.passRateLabel': 'Erfolgsquote',
    'dashboard.totalScore': 'Gesamtpunktzahl',
    'dashboard.passedLabel': 'Bestanden',
    'dashboard.needImprovement': 'Verbesserungsbedarf',
    'dashboard.allChapters': 'Alle Kapitel',
    'dashboard.congratulations': 'Herzlichen GlÃ¼ckwunsch!',
    'dashboard.completedAll': 'Sie haben alle Kapitel und Tests abgeschlossen',
    'dashboard.reset': 'Fortschritt zurÃ¼cksetzen',
    'dashboard.resetConfirm': 'Sind Sie sicher, dass Sie den gesamten Fortschritt zurÃ¼cksetzen mÃ¶chten?',
    
    // Quiz
    'quiz.complete': 'Test Abgeschlossen!',
    'quiz.excellent': 'Ausgezeichnet! Sie beherrschen dieses Kapitel.',
    'quiz.good': 'Gut! ÃœberprÃ¼fen Sie die falschen Fragen.',
    'quiz.keepStudying': 'Weiter lernen! Kapitel erneut lesen und noch einmal versuchen.',
    'quiz.chapterComplete': 'Kapitel als abgeschlossen markiert!',
    'quiz.questionPool': 'Fragenpool',
    'quiz.showing': 'Anzeigen',
    'quiz.perRound': 'pro Runde',
    'quiz.tryAgain': 'Erneut Versuchen',
    'quiz.newQuestions': 'Neue Fragen',
    'quiz.question': 'Frage',
    'quiz.of': 'von',
    'quiz.previousBest': 'Bisherige Bestleistung',
    'quiz.correct': 'Richtig!',
    'quiz.incorrect': 'Falsch',
    'quiz.next': 'NÃ¤chste Frage',
    'quiz.seeResults': 'Ergebnisse Anzeigen',
    
    // Navigation
    'nav.previous': 'Vorherige',
    'nav.next': 'NÃ¤chste',
    'nav.search': 'Im Handbuch suchen...',
    'nav.noResults': 'Keine Ergebnisse gefunden',
    
    // Language
    'language.select': 'Sprache wÃ¤hlen',
    'language.ro': 'RomÃ¢nÄƒ',
    'language.de': 'Deutsch',
    'language.en': 'English',
    
    // Admin Dashboard
    'admin.title': 'Admin Dashboard',
    'admin.subtitle': 'Benutzer- und Schulungsfortschritt verwalten',
    'admin.exportCSV': 'CSV exportieren',
    'admin.totalUsers': 'Benutzer Gesamt',
    'admin.registeredUsers': 'registrierte Benutzer',
    'admin.totalChapters': 'Kapitel Gesamt',
    'admin.availableChapters': 'verfÃ¼gbare Kapitel',
    'admin.globalAvgScore': 'Globaler Durchschnitt',
    'admin.allScoresAvg': 'Durchschnitt aller Punkte',
    'admin.activeUsers7d': 'Aktive Benutzer (7 Tage)',
    'admin.recentlyActive': 'kÃ¼rzlich aktiv',
    'admin.notificationsActive': 'Benachrichtigungen fÃ¼r neue Zertifikate aktiv',
    'admin.enableNotifications': 'Benachrichtigungen fÃ¼r neue Zertifikate aktivieren',
    
    // Admin Categories
    'admin.category.superAdmin': 'ğŸ¢ SUPER ADMIN',
    'admin.category.users': 'ğŸ‘¥ BENUTZER',
    'admin.category.analytics': 'ğŸ“Š ANALYSEN & KPI',
    'admin.category.competencies': 'ğŸ¯ KOMPETENZEN',
    'admin.category.content': 'ğŸ“ INHALT',
    'admin.category.system': 'âš™ï¸ SYSTEM',
    
    // Admin Tabs
    'admin.tab.companies': 'Unternehmen',
    'admin.tab.plans': 'PlÃ¤ne',
    'admin.tab.premium': 'Premium',
    'admin.tab.companyUsers': 'Unternehmensbenutzer',
    'admin.tab.chapters': 'Kapitel',
    'admin.tab.reports': 'Berichte',
    'admin.tab.allProfiles': 'Alle Profile',
    'admin.tab.retention': 'Bindung',
    'admin.tab.quizAnalytics': 'Quiz-Analyse',
    'admin.tab.charts': 'Diagramme',
    'admin.tab.learningKPI': 'Lern-KPI',
    'admin.tab.usage': 'Nutzung',
    'admin.tab.trainingTime': 'Trainingszeit',
    'admin.tab.realtime': 'Echtzeit',
    'admin.tab.teamCompetencies': 'Team-Kompetenzen',
    'admin.tab.competencyGaps': 'KompetenzlÃ¼cken',
    'admin.tab.gamification': 'Gamification',
    'admin.tab.certificates': 'Zertifikate',
    'admin.tab.contentQuality': 'InhaltsqualitÃ¤t',
    'admin.tab.governance': 'Governance',
    'admin.tab.aiGovernor': 'AI Governor',
    'admin.tab.autoUpdate': 'Auto-Update',
    'admin.tab.intStandards': 'Int. Standards',
    'admin.tab.knowledgeGraph': 'Wissensgraph',
    'admin.tab.cronJobs': 'Cron Jobs',
    'admin.tab.monitoring': 'Ãœberwachung',
    'admin.tab.backup': 'Backup',
    'admin.tab.incidents': 'VorfÃ¤lle',
    'admin.tab.production': 'Produktion',
    
    // Admin Table
    'admin.table.user': 'Benutzer',
    'admin.table.email': 'E-Mail',
    'admin.table.role': 'Rolle',
    'admin.table.progress': 'Fortschritt',
    'admin.table.avgScore': 'Durchschnitt',
    'admin.table.lastActivity': 'Letzte AktivitÃ¤t',
    'admin.table.actions': 'Aktionen',
    'admin.table.viewDetails': 'Details anzeigen',
    
    // Admin Status
    'admin.status.completed': 'Abgeschlossen',
    'admin.status.inProgress': 'In Bearbeitung',
    'admin.status.unlocked': 'Freigeschaltet',
    'admin.status.locked': 'Gesperrt',
    
    // Quiz Analytics
    'admin.quiz.starts': 'Quiz-Starts',
    'admin.quiz.completions': 'AbschlÃ¼sse',
    'admin.quiz.refreshes': 'Aktualisierungen',
    'admin.quiz.abandonRate': 'Abbruchrate',
    'admin.quiz.wrongAnswers': 'Falsche Antworten',
    'admin.quiz.perChapter': 'Pro Kapitel',
    'admin.quiz.failedQuestions': 'Fehlgeschlagene Fragen',
    'admin.quiz.perUser': 'Pro Benutzer',
    'admin.quiz.refresh': 'Aktualisieren',
    'admin.quiz.export': 'CSV Exportieren',
    'admin.quiz.refreshRate': 'Aktualisierungsrate pro Kapitel',
    'admin.quiz.refreshRateDesc': 'Prozentsatz der gestarteten aber nicht abgeschlossenen Quiz',
    'admin.quiz.completionDist': 'Abschlussverteilung',
    'admin.quiz.completedVsAbandoned': 'Abgeschlossen vs Abgebrochen',
    'admin.quiz.completed': 'Abgeschlossen',
    'admin.quiz.abandoned': 'Aktualisierung/Abbruch',
    'admin.quiz.chapterDetails': 'Details pro Kapitel',
    'admin.quiz.chapter': 'Kapitel',
    'admin.quiz.top30Failed': 'Top 30 Fehlgeschlagene Fragen',
    'admin.quiz.mostFailed': 'Fragen, bei denen Benutzer am hÃ¤ufigsten Fehler machen',
    'admin.quiz.noData': 'Noch keine Daten. Falsche Antworten werden hier angezeigt.',
    'admin.quiz.errors': 'Fehler',
    'admin.quiz.userStats': 'Statistiken pro Benutzer',
    'admin.quiz.userStatsDesc': 'Wie viele Quiz jeder Benutzer gestartet/abgeschlossen hat',
    
    // Company Management
    'admin.company.title': 'Unternehmensverwaltung',
    'admin.company.subtitle': 'Verwalten Sie alle Unternehmen der Plattform',
    'admin.company.new': 'Neues Unternehmen',
    'admin.company.create': 'Neues Unternehmen Erstellen',
    'admin.company.add': 'Neues Unternehmen zur Plattform hinzufÃ¼gen',
    'admin.company.name': 'Unternehmensname',
    'admin.company.slug': 'Slug (URL)',
    'admin.company.domain': 'Benutzerdefinierte Domain (optional)',
    'admin.company.plan': 'Plan',
    'admin.company.cancel': 'Abbrechen',
    'admin.company.createBtn': 'Erstellen',
    'admin.company.regCode': 'Registrierungscode',
    'admin.company.users': 'Benutzer',
    'admin.company.status': 'Status',
    'admin.company.restricted': 'Zugang eingeschrÃ¤nkt',
    'admin.company.restrictedDesc': 'Nur Super Admin kann Unternehmen verwalten.',
    'admin.company.created': 'Unternehmen erstellt',
    'admin.company.createdDesc': 'wurde erfolgreich erstellt',
    'admin.company.copied': 'Kopiert!',
    'admin.company.copiedDesc': 'Code in Zwischenablage kopiert',
    'admin.company.updated': 'Status aktualisiert',
    'admin.company.active': 'aktiv',
    'admin.company.inactive': 'inaktiv',
    
    // Retention Dashboard
    'admin.retention.title': 'Bindungs-Dashboard',
    'admin.retention.activeUsers': 'Aktive Benutzer',
    'admin.retention.atRisk': 'GefÃ¤hrdet',
    'admin.retention.inactive': 'Inaktiv/Verloren',
    'admin.retention.reEngagement': 'Wiederbindungsrate',
    'admin.retention.riskDist': 'Risikoverteilung',
    'admin.retention.low': 'Niedrig',
    'admin.retention.medium': 'Mittel',
    'admin.retention.high': 'Hoch',
    'admin.retention.critical': 'Kritisch',
    'admin.retention.usersAtRisk': 'GefÃ¤hrdete Benutzer',
    'admin.retention.messageLogs': 'Nachrichtenprotokoll',
    'admin.retention.runAnalysis': 'Analyse Starten',
    'admin.retention.analyzing': 'Analysiere...',
    'admin.retention.daysInactive': 'Tage inaktiv',
    'admin.retention.engagement': 'Engagement',
    'admin.retention.notifications': 'Benachrichtigungen gesendet',
    
    // Gamification
    'admin.gamification.title': 'Bestenliste & Gamification',
    'admin.gamification.leaderboard': 'Bestenliste',
    'admin.gamification.achievements': 'Erfolge',
    'admin.gamification.simStats': 'Simulationsstatistiken',
    'admin.gamification.activeUsers': 'Aktive Benutzer',
    'admin.gamification.simCompleted': 'Simulationen Abgeschlossen',
    'admin.gamification.avgScore': 'Durchschnittsnote',
    'admin.gamification.totalXP': 'Gesamt XP',
    'admin.gamification.level': 'Stufe',
    'admin.gamification.simulations': 'Simulationen',
    'admin.gamification.streak': 'TagesstrÃ¤hne',
    'admin.gamification.topPerformers': 'Top Simulationsperformer',
    'admin.gamification.simPopularity': 'Simulationsbeliebtheit',
    
    // General Admin
    'admin.general.loading': 'Laden...',
    'admin.general.error': 'Fehler',
    'admin.general.save': 'Speichern',
    'admin.general.delete': 'LÃ¶schen',
    'admin.general.edit': 'Bearbeiten',
    'admin.general.view': 'Anzeigen',
    'admin.general.close': 'SchlieÃŸen',
    'admin.general.confirm': 'BestÃ¤tigen',
    'admin.general.noData': 'Keine Daten vorhanden',
    'admin.general.perMonth': '/Monat',
  },
  en: {
    // Sidebar
    'sidebar.title': 'Freight Forwarding Manual',
    'sidebar.progress': 'Overall Progress',
    'sidebar.chapters': 'chapters',
    'sidebar.details': 'Details',
    'sidebar.version': 'Version 2025',
    'sidebar.edition': 'Complete Edition',
    'sidebar.locked': 'Complete the previous chapter with score â‰¥9/10',
    
    // Sections
    'section.foundation': 'Foundation',
    'section.equipment': 'Equipment & Handling',
    'section.documents': 'Documents & Regulations',
    'section.geography': 'Geography & Routes',
    'section.commercial': 'Commercial Skills',
    'section.technology': 'Systems & Technology',
    'section.finance': 'Risk & Finance',
    'section.practical': 'Practical Application',
    
    // Chapters
    'chapter.intro': 'Introduction',
    'chapter.mindset': 'Role & Mindset',
    'chapter.soft-skills': 'Soft Skills',
    'chapter.workflow': 'Operational Workflow',
    'chapter.vehicle': 'Vehicle Reference',
    'chapter.loading': 'Loading & Securing',
    'chapter.reefer': 'Temperature Transport',
    'chapter.warehouse': 'Warehouse & Cross-Dock',
    'chapter.adr': 'ADR Dangerous Goods',
    'chapter.documents': 'Transport Documents',
    'chapter.incoterms': 'Incoterms & Trade',
    'chapter.compliance': 'Driving Hours',
    'chapter.driving-time': 'Shift vs Driving',
    'chapter.customs': 'Customs & Borders',
    'chapter.europe-zones': 'European Zones',
    'chapter.environment': 'Environmental',
    'chapter.supply-chain': 'Supply Chain',
    'chapter.pricing': 'Pricing & Tolls',
    'chapter.commercial': 'Commercial Skills',
    'chapter.negotiation': 'Negotiation',
    'chapter.clients': 'Finding Clients',
    'chapter.carrier-management': 'Carrier Management',
    'chapter.exchanges': 'Freight Exchanges',
    'chapter.communication': 'Communication',
    'chapter.kpi': 'KPIs & Performance',
    'chapter.translogica': 'Translogica TMS',
    'chapter.fleet': 'Fleet & GPS',
    'chapter.technology': 'Technology & Digital',
    'chapter.risk-management': 'Risk Management',
    'chapter.insurance': 'Transport Insurance',
    'chapter.claims': 'Claims & Disputes',
    'chapter.payment': 'Payment & Invoicing',
    'chapter.accounting': 'Accounting & Finance',
    'chapter.emergency': 'Emergency Procedures',
    'chapter.case-studies': 'Case Studies',
    'chapter.training': 'Training Exercises',
    'chapter.red-flags': 'Red Flags & Tips',
    'chapter.glossary': 'Glossary',
    'chapter.checklists': 'Checklists',
    'chapter.licenses-oversize': 'Licenses & Oversize',
    'chapter.stress-management': 'Stress Management',
    'chapter.sustainability': 'Sustainability',
    'chapter.authorities': 'Authorities & Regulations',
    'chapter.digitalization': 'Digitalization',
    'chapter.european-countries': 'European Countries',
    'chapter.express-transport': 'Express Transport',
    'chapter.high-value-goods': 'High-Value Goods',
    'chapter.intermodal': 'Intermodal Transport',
    'chapter.networking': 'Networking',
    'chapter.professional-development': 'Professional Development',
    
    // Sections
    'section.advanced': 'Advanced',
    
    // Dashboard
    'dashboard.title': 'Progress Dashboard',
    'dashboard.subtitle': 'Track your learning journey',
    'dashboard.back': 'Back',
    'dashboard.overall': 'Overall Progress',
    'dashboard.completed': 'Chapters Completed',
    'dashboard.total': 'of total',
    'dashboard.quizzes': 'Quizzes Completed',
    'dashboard.passed': 'passed',
    'dashboard.average': 'Average Score',
    'dashboard.passRate': 'pass rate',
    'dashboard.recent': 'Recent Activity',
    'dashboard.noActivity': 'No activity yet. Start reading chapters!',
    'dashboard.quizPerformance': 'Quiz Performance',
    'dashboard.passRateLabel': 'Pass Rate',
    'dashboard.totalScore': 'Total Score',
    'dashboard.passedLabel': 'Passed',
    'dashboard.needImprovement': 'Need Improvement',
    'dashboard.allChapters': 'All Chapters',
    'dashboard.congratulations': 'Congratulations!',
    'dashboard.completedAll': 'You have completed all chapters and quizzes',
    'dashboard.reset': 'Reset Progress',
    'dashboard.resetConfirm': 'Are you sure you want to reset all progress?',
    
    // Quiz
    'quiz.complete': 'Quiz Complete!',
    'quiz.excellent': 'Excellent work! You\'ve mastered this chapter.',
    'quiz.good': 'Good job! Review the missed questions.',
    'quiz.keepStudying': 'Keep studying! Review the chapter and try again.',
    'quiz.chapterComplete': 'Chapter marked as complete!',
    'quiz.questionPool': 'Question pool',
    'quiz.showing': 'Showing',
    'quiz.perRound': 'per round',
    'quiz.tryAgain': 'Try Again',
    'quiz.newQuestions': 'New Questions',
    'quiz.question': 'Question',
    'quiz.of': 'of',
    'quiz.previousBest': 'Previous best',
    'quiz.correct': 'Correct!',
    'quiz.incorrect': 'Incorrect',
    'quiz.next': 'Next Question',
    'quiz.seeResults': 'See Results',
    
    // Navigation
    'nav.previous': 'Previous',
    'nav.next': 'Next',
    'nav.search': 'Search manual...',
    'nav.noResults': 'No results found',
    
    // Language
    'language.select': 'Select language',
    'language.ro': 'RomÃ¢nÄƒ',
    'language.de': 'Deutsch',
    'language.en': 'English',
    
    // Admin Dashboard
    'admin.title': 'Admin Dashboard',
    'admin.subtitle': 'Manage users and training progress',
    'admin.exportCSV': 'Export CSV',
    'admin.totalUsers': 'Total Users',
    'admin.registeredUsers': 'registered users',
    'admin.totalChapters': 'Total Chapters',
    'admin.availableChapters': 'available chapters',
    'admin.globalAvgScore': 'Global Average Score',
    'admin.allScoresAvg': 'average of all scores',
    'admin.activeUsers7d': 'Active Users (7 days)',
    'admin.recentlyActive': 'recently active',
    'admin.notificationsActive': 'Notifications active for new certificates',
    'admin.enableNotifications': 'Enable notifications for new certificates',
    
    // Admin Categories
    'admin.category.superAdmin': 'ğŸ¢ SUPER ADMIN',
    'admin.category.users': 'ğŸ‘¥ USERS',
    'admin.category.analytics': 'ğŸ“Š ANALYTICS & KPI',
    'admin.category.competencies': 'ğŸ¯ COMPETENCIES',
    'admin.category.content': 'ğŸ“ CONTENT',
    'admin.category.system': 'âš™ï¸ SYSTEM',
    
    // Admin Tabs
    'admin.tab.companies': 'Companies',
    'admin.tab.plans': 'Plans',
    'admin.tab.premium': 'Premium',
    'admin.tab.companyUsers': 'Company Users',
    'admin.tab.chapters': 'Chapters',
    'admin.tab.reports': 'Reports',
    'admin.tab.allProfiles': 'All Profiles',
    'admin.tab.retention': 'Retention',
    'admin.tab.quizAnalytics': 'Quiz Analytics',
    'admin.tab.charts': 'Charts',
    'admin.tab.learningKPI': 'Learning KPI',
    'admin.tab.usage': 'Usage',
    'admin.tab.trainingTime': 'Training Time',
    'admin.tab.realtime': 'Real-time',
    'admin.tab.teamCompetencies': 'Team Competencies',
    'admin.tab.competencyGaps': 'Competency Gaps',
    'admin.tab.gamification': 'Gamification',
    'admin.tab.certificates': 'Certificates',
    'admin.tab.contentQuality': 'Content Quality',
    'admin.tab.governance': 'Governance',
    'admin.tab.aiGovernor': 'AI Governor',
    'admin.tab.autoUpdate': 'Auto-Update',
    'admin.tab.intStandards': 'Int. Standards',
    'admin.tab.knowledgeGraph': 'Knowledge Graph',
    'admin.tab.cronJobs': 'Cron Jobs',
    'admin.tab.monitoring': 'Monitoring',
    'admin.tab.backup': 'Backup',
    'admin.tab.incidents': 'Incidents',
    'admin.tab.production': 'Production',
    
    // Admin Table
    'admin.table.user': 'User',
    'admin.table.email': 'Email',
    'admin.table.role': 'Role',
    'admin.table.progress': 'Progress',
    'admin.table.avgScore': 'Avg Score',
    'admin.table.lastActivity': 'Last Activity',
    'admin.table.actions': 'Actions',
    'admin.table.viewDetails': 'View details',
    
    // Admin Status
    'admin.status.completed': 'Completed',
    'admin.status.inProgress': 'In Progress',
    'admin.status.unlocked': 'Unlocked',
    'admin.status.locked': 'Locked',
    
    // Quiz Analytics
    'admin.quiz.starts': 'Quiz Starts',
    'admin.quiz.completions': 'Completions',
    'admin.quiz.refreshes': 'Refreshes',
    'admin.quiz.abandonRate': 'Abandon Rate',
    'admin.quiz.wrongAnswers': 'Wrong Answers',
    'admin.quiz.perChapter': 'Per Chapter',
    'admin.quiz.failedQuestions': 'Failed Questions',
    'admin.quiz.perUser': 'Per User',
    'admin.quiz.refresh': 'Refresh',
    'admin.quiz.export': 'Export CSV',
    'admin.quiz.refreshRate': 'Refresh Rate per Chapter',
    'admin.quiz.refreshRateDesc': 'Percentage of quizzes started but not completed',
    'admin.quiz.completionDist': 'Completion Distribution',
    'admin.quiz.completedVsAbandoned': 'Completed vs Abandoned',
    'admin.quiz.completed': 'Completed',
    'admin.quiz.abandoned': 'Refresh/Abandon',
    'admin.quiz.chapterDetails': 'Chapter Details',
    'admin.quiz.chapter': 'Chapter',
    'admin.quiz.top30Failed': 'Top 30 Failed Questions',
    'admin.quiz.mostFailed': 'Questions users fail most often',
    'admin.quiz.noData': 'No data yet. Wrong answers will appear here.',
    'admin.quiz.errors': 'errors',
    'admin.quiz.userStats': 'User Statistics',
    'admin.quiz.userStatsDesc': 'How many quizzes each user has started/completed',
    
    // Company Management
    'admin.company.title': 'Company Management',
    'admin.company.subtitle': 'Manage all companies in the platform',
    'admin.company.new': 'New Company',
    'admin.company.create': 'Create New Company',
    'admin.company.add': 'Add a new company to the platform',
    'admin.company.name': 'Company Name',
    'admin.company.slug': 'Slug (URL)',
    'admin.company.domain': 'Custom Domain (optional)',
    'admin.company.plan': 'Plan',
    'admin.company.cancel': 'Cancel',
    'admin.company.createBtn': 'Create',
    'admin.company.regCode': 'Registration Code',
    'admin.company.users': 'Users',
    'admin.company.status': 'Status',
    'admin.company.restricted': 'Access Restricted',
    'admin.company.restrictedDesc': 'Only Super Admin can manage companies.',
    'admin.company.created': 'Company created',
    'admin.company.createdDesc': 'was created successfully',
    'admin.company.copied': 'Copied!',
    'admin.company.copiedDesc': 'Code copied to clipboard',
    'admin.company.updated': 'Status updated',
    'admin.company.active': 'active',
    'admin.company.inactive': 'inactive',
    
    // Retention Dashboard
    'admin.retention.title': 'Retention Dashboard',
    'admin.retention.activeUsers': 'Active Users',
    'admin.retention.atRisk': 'At Risk',
    'admin.retention.inactive': 'Inactive/Churned',
    'admin.retention.reEngagement': 'Re-engagement Rate',
    'admin.retention.riskDist': 'Risk Distribution',
    'admin.retention.low': 'Low',
    'admin.retention.medium': 'Medium',
    'admin.retention.high': 'High',
    'admin.retention.critical': 'Critical',
    'admin.retention.usersAtRisk': 'Users at Risk',
    'admin.retention.messageLogs': 'Message Logs',
    'admin.retention.runAnalysis': 'Run Analysis',
    'admin.retention.analyzing': 'Analyzing...',
    'admin.retention.daysInactive': 'days inactive',
    'admin.retention.engagement': 'Engagement',
    'admin.retention.notifications': 'notifications sent',
    
    // Gamification
    'admin.gamification.title': 'Leaderboard & Gamification',
    'admin.gamification.leaderboard': 'Leaderboard',
    'admin.gamification.achievements': 'Achievements',
    'admin.gamification.simStats': 'Simulation Statistics',
    'admin.gamification.activeUsers': 'Active Users',
    'admin.gamification.simCompleted': 'Simulations Completed',
    'admin.gamification.avgScore': 'Average Score',
    'admin.gamification.totalXP': 'Total XP',
    'admin.gamification.level': 'Level',
    'admin.gamification.simulations': 'Simulations',
    'admin.gamification.streak': 'Day Streak',
    'admin.gamification.topPerformers': 'Top Simulation Performers',
    'admin.gamification.simPopularity': 'Simulation Popularity',
    
    // General Admin
    'admin.general.loading': 'Loading...',
    'admin.general.error': 'Error',
    'admin.general.save': 'Save',
    'admin.general.delete': 'Delete',
    'admin.general.edit': 'Edit',
    'admin.general.view': 'View',
    'admin.general.close': 'Close',
    'admin.general.confirm': 'Confirm',
    'admin.general.noData': 'No data available',
    'admin.general.perMonth': '/month',
  },
};

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>('ro');

  useEffect(() => {
    const stored = localStorage.getItem(STORAGE_KEY) as Language | null;
    if (stored && ['ro', 'de', 'en'].includes(stored)) {
      setLanguageState(stored);
    }
  }, []);

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem(STORAGE_KEY, lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}

export { translations };
